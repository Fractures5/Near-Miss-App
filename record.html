<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Record Near-miss</title>
      <link rel = "icon" type = "image/png" href = "./images/logo.png">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
      <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
      <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
      <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/4.2.0/mdb.min.css" rel="stylesheet" />
      <link rel="stylesheet" href="./styles/style.css">
      <script src="https://kit.fontawesome.com/yourcode.js" crossorigin="anonymous"></script>
      <script type="text/javascript" src="xhr.js"></script>
      <script type="text/javascript" src="ajaxRecordForm.js"></script>
      <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
      <link href="//cdn.rawgit.com/Eonasdan/bootstrap-datetimepicker/e8bddc60e73c1ec2475f827be36e1957af72e2ea/build/css/bootstrap-datetimepicker.css" rel="stylesheet">
      <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.js"></script>
      <script src="//cdn.rawgit.com/Eonasdan/bootstrap-datetimepicker/e8bddc60e73c1ec2475f827be36e1957af72e2ea/src/js/bootstrap-datetimepicker.js"></script>
   </head>
   <body>
      <header>
         <!-- Navbar -->
         <nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid">
               <nav aria-label="breadcrumb">
                  <ol class="breadcrumb">
                     <li>
                        <a href="index.html">
                           <div class="sub-menu">
                              <i class="bi bi-house-door"></i>
                              <p class="menu-title">Home</p>
                           </div>
                        </a>
                     </li>
                     <li>
                        <a href="index.html#about-section">
                           <div class="sub-menu">
                              <i class="bi bi-info-square"></i>
                              <p class="menu-title">About</p>
                           </div>
                        </a>
                     </li>
                     <li>
                        <a href="index.html#contact-section">
                           <div class="sub-menu">
                              <i class="bi bi-chat-left-text"></i>
                              <p class="menu-title">Contact</p>
                           </div>
                        </a>
                     </li>
                     <li>
                        <a href="adminlogin.html">
                           <div class="sub-menu">
                              <i class="bi bi-person-circle"></i>
                              <p class="menu-title">Admin</p>
                           </div>
                        </a>
                     </li>
                     <li>
                        <a href="record.html">
                           <div class="sub-menu">
                              <i class="bi bi-pencil-square"></i>
                              <p class="menu-title">Record</p>
                           </div>
                        </a>
                     </li>
                  </ol>
               </nav>
            </div>
         </nav>
         <!-- Navbar -->
      </header>
      <div class = "record-case-container">
      <h1 class="our-team-section" style="padding-top: 100px; color: white;">Record a Near-miss</h1>
      <!-- This is the form that we are using for the whole page, the application will run on this form. -->
      <div class="form-group">
         <!-- This input field is used to gather the location of the near miss, the input field has validation to it, in case the user use a wrong format. -->
         <form action="recordInfo.php" method="POST" enctype="multipart/form-data">
            <div class="frm-caption-title">
               <br><input 
                  style="height:50px;font-size:14pt;" 
                  type="text" 
                  id="nmSiteLocation" 
                  name="nmSiteLocation" 
                  class="siteLoc"
                  placeholder="Enter Site Location..." 
                  title = "Please Enter the Site Location/Address of your Near-miss" 
                  required 
                  placeholder="Please Enter the Site Location or Address of your Near-miss"
                  oninvalid="this.setCustomValidity('Please Enter the Site Location or Address of your Near-miss')"
                  oninput="this.setCustomValidity('')"><br>
               <div>
                  <div>
                     <br>
                     <!-- This input field is used to gather the region of the near miss, there is a button that will gather the location of the user and enter
                     the region inside the input field. -->
                     <input style="height:50px;font-size:14pt;" 
                        type="text" 
                        id="nmRegionSubdiv" 
                        name="nmRegionSubdiv" 
                        class="siteLoc"
                        placeholder="Region (Optional)">
                     <button class="find-geolocation" class="btn btn-dark btn-rounded" id='btnTrack' >Detect</button>
                     <br>
                  </div>
                  <div>
                     <!-- This input field is being used to gather the in site location of the near miss, here the user should add the extra information about the location
                     e.g. Level 7 room 715. -->
                     <br><input type="text" id="nmInSiteLocation" name="nmInSiteLocation"
                        placeholder="Enter In-Site Location..." title = "Please Enter the Specific In-Site Location of your Near-miss" required placeholder="Please Enter the Specific In-Site Location of your Near-miss"
                        oninvalid="this.setCustomValidity('Please Enter the Specific In-Site Location of your Near-miss')"
                        oninput="this.setCustomValidity('')">
                  </div>
                  <div id="upload-image">
                     <!-- This field is being used to attach an image of the near miss to the form, here the user can either take a photo in the moment or they add a photo from
                     their camera rool, or documents in case they are using from a computer. -->
                     <label for="uploadImage">Attach Image:</label>
                     <div id="choose-files">
                        <input type="button" class="btn btn-dark btn-rounded" value="Capture Image" onclick="document.getElementById('uploaded-image').click();" />
                        <input type="file" 
                           class="custom-file-input"
                           id="uploaded-image" 
                           accept="image/jpeg, image/png, image/jpg" 
                           name="uploadedImageFile"
                           onchange=showImagePreviewBox() 
                           title = "Attach Photos/Images to your Near-miss Case" 
                           multiple 
                           required 
                           style="display: none;"
                           placeholder="Please Attach atleast 1 or more photos to complement your Near-miss case"
                           oninvalid="this.setCustomValidity('Please Attach atleast 1 image/photo. Only JPEG, PNG, JPG Images are Accepted!')"
                           oninput="this.setCustomValidity('')">
                     </div>
                     <br>
                     <h3 id="image-preview-title" style="display:none">Uploaded Image Preview</h3>
                     <div id="show-uploaded-image" style="display:none">
                     </div>
                     <br>
                  </div>
                  <div>
                     <!-- This input field is used to gather a description of the near miss, here there is a text area that allow the user to type information or,
                     if using chrome they can use the voice recognition and that will recognise what the user is saying and will transform into text. -->
                     <fieldset>
                        <h5>Fill Out Description With Speech-To-Text Recognition (Chrome Only)</h5>
                        <p>Click 'Record Description' button then place cursor into the description field</p>
                        <br>
                        <div>
                           <button type="button" id="toggle" class="btn btn-dark btn-rounded">Record description</button>
                           <br />
                           <br />
                           <code id="result" class="transcriptText" >Live Speech-Transcript Here ...</code>
                        </div>
                        <br>
                        <textarea 
                           id="description" 
                           name="description" 
                           rows="3" 
                           style="width: 75%"
                           title = "Please Provide a Description of your Near-miss" 
                           placeholder="Please Provide a Description of your Near-miss"
                           oninvalid="this.setCustomValidity('Please Provide a Description of your Near-miss')"
                           oninput="this.setCustomValidity('')"></textarea>
                     </fieldset>
                  </div>
                  <!-- Here there is a input field for the date and time of near misses -->
                  <p></p>
                  <i class="fa-solid fa-clock" style="color: white;"></i>
                  <label for="time" style="color: white;">Date and Time of Near-miss</label><br>
                  <label for="dateTime"></label>
                  <input type="datetime-local" id="dateTime" name="dateTime" onchange="checkForValidDate()" title = "Please Provide a Date and Time of your Near-miss" required placeholder="Please Enter the Date and Time of the Near-miss"
                     oninvalid="this.setCustomValidity('Please Enter a valid Date and Time for your Near-miss')"
                     oninput="this.setCustomValidity('')">
               </div>
               <br>
               <input type="reset" class="btn btn-outline-dark" data-mdb-ripple-color="dark"  value="Reset" >
               <input type="submit" class="btn btn-success" id = "submit" value="Submit" name = "submit">
               <br><br>
         </form>
         </div>
      </div>
   </body>
   <script type="text/javascript" src="uploadImageFunctions.js"></script>
   <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/4.2.0/mdb.min.js"></script>
   <script type="text/javascript" src="dateTimeValidation.js"></script>
   <script type="text/javascript" src="geolocationTag.js"></script>
   <script type="text/javascript" src="voiceToText.js"></script>
   <script type="text/javascript">
      $(function () {
          $('#dtpickerdemo').datetimepicker();
      });
   </script>
</html>