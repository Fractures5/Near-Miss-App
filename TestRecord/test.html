<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    
    <!-- <form class="box" action="test.html" method="POST">

        <h1 class = "status"></h1>
        <button class = "find-area">Find my area</button>
        <input id="autocomplete" placeholder="Enter a place" type="test" />

    </form> -->

    <h1 class="status"></h1>
    <button class="find-location">Find my area</button>

    <script>

        const findMyArea = () => {
            const status = document.querySelector('.status');

            const success = (position) => {
                console.log(position)
                const latitude = position.coords.latitude;
                const longitude = position.coords.longitude;
                console.log(latitude + ' ' + longitude);

                const geoApiUrl = 'https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${latitude}&longitude=${longitude}&localityLanguage=en'

                fetch(geoApiUrl)
                .then(res => res.json())
                .then(data => {
                    status.textContent = data.city + ' ' + data.locality;
                    console.log(data)
                })
            }

            const error = () => {
                status.textContent = 'Unable to retrieve your location';
            }

            navigator.geolocation.getCurrentPosition(success, error);
        }

        document.querySelector('.find-location').addEventListener('click', findMyArea);
        
    </script>
    <!-- <script>
        let autocomplete;
        function initAutocomplete(){

            autocomplete = new google.maps.places.Autocomplete(

                document.getElementById('autocomplete'),
                {
                    types: ['establishment'],
                    componentRestrictions: {'country' : ['AU']},
                    fields: ['place_id', 'geometry', 'name']
                });
            
        }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=[API_KEY]&libraries=places&callback=initAutocomplete"async defer>
    </script> -->
</body>
</html>